{% extends 'inicio.html' %}

{% block content %}
    <main>

        <form method="get" action="{{ url_for('lanches') }}">
            <input type="hidden" name="form_id" value="valor">  <!-- identifica qual foi alterado -->
            <input type="hidden" name="valor_" value="{{ valor_ }}">
            <input type="hidden" name="exibir" value="{{ exibir }}">

            {% if valor_ in ['True', True] %}
                <label for="tabela" style="color: white">Tabela</label>
                <input type="checkbox"
                       id="tabela"
                       name="tabela"
                       onchange="this.form.submit()"
                       checked
                >
            {% else %}
                <label for="tabela2" style="color: white">Tabela</label>
                <input type="checkbox"
                       id="tabela2"
                       name="tabela"
                       onchange="this.form.submit()"
                >
            {% endif %}
        </form>

        <!-- Checkbox "Exibir ocultos" -->
        <form method="get" action="{{ url_for('lanches') }}">
            <input type="hidden" name="form_id" value="exibir">  <!-- identifica qual foi alterado -->
            <input type="hidden" name="valor_" value="{{ valor_ }}">
            <input type="hidden" name="exibir" value="{{ exibir }}">
            {% if exibir in ['True', True] %}
                <label for="oculto" style="color: white">Exibir ocultos</label>
                <input type="checkbox"
                       id="oculto"
                       name="tabela"
                       onchange="this.form.submit()"
                       checked
                >
            {% else %}
                <label for="oculto2" style="color: white">Exibir ocultos</label>
                <input type="checkbox"
                       id="oculto2"
                       name="tabela"
                       onchange="this.form.submit()"

                >
            {% endif %}
        </form>

        {% if not valor_ or valor_ == 'False' %}
            {% for l in lanches %}
                {% if exibir in ['True', True] %}
                    {% if l['disponivel'] in ['True', True] %}
                        <div class="card">
                            <h1>#{{l['id_lanche']}}</h1>
                            <h2>{{l['nome_lanche']}}</h2>
                            <p>{{l['valor_lanches']}}</p>
                        </div>
                    {% else %}
                        <div class="card-user">
                            <h1>#{{l['id_lanche']}}</h1>
                            <h2>{{l['nome_lanche']}}</h2>
                            <p>{{l['valor_lanches']}}</p>
                        </div>
                    {% endif %}

                {% else %}
                    {% if l['disponivel'] in [True, 'True'] %}
                        <div class="card">
                            <h1>#{{l['id_lanche']}}</h1>
                            <h2>{{l['nome_lanche']}}</h2>
                            <p>{{l['valor_lanches']}}</p>
                        </div>
                    {% endif %}
                {% endif %}
            {% endfor %}
        {% else %}
            <table class="tabela">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>NOME</th>
                        <th>VALOR</th>
                    </tr>
                </thead>
                <tbody>
                    {% for l in lanches %}
                        {% if exibir in ['True', True] %}
                            {%  if l['disponivel'] in ['True', True] %}
                                <tr>
                                    <th>#{{l['id_lanche']}}</th>
                                    <th>{{l['nome_lanche']}}</th>
                                    <th>{{l['valor_lanche']}}</th>
                                </tr>
                            {% else %}
                                <tr class="tr-desativado">
                                    <th>#{{l['id_lanche']}}</th>
                                    <th>{{l['nome_lanche']}}</th>
                                    <th>{{l['valor_lanche']}}</th>
                                </tr>
                            {% endif %}
                        {% else %}
                            {% if l['disponivel'] in ['True', True] %}
                                <tr>
                                    <th>#{{l['id_lanche']}}</th>
                                    <th>{{l['nome_lanche']}}</th>
                                    <th>{{l['valor_lanche']}}</th>
                                </tr>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        {% endif %}
    </main>
{% endblock %}