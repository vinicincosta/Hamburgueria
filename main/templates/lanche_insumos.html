{% extends 'inicio.html' %}

{% block content %}

<style>
    .filtros-container {
        display: flex;
        justify-content: center;
        gap: 25px;
        align-items: center;
        margin: 20px 0 30px 0;
        width: 100%;
    }

    .filtro-item {
        display: flex;
        align-items: center;
        gap: 10px;
        background: rgba(0, 0, 0, 0.35);
        padding: 10px 15px;
        border-radius: 8px;
    }

    .filtro-item label {
        color: white;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
    }

    .filtro-item input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
    }

    .card,
    .card-user {
        background: #222;
        border-radius: 10px;
        padding: 18px 20px;
        color: white;

        /* Flexbox para alinhar conte√∫do verticalmente (e o bot√£o no final) */
        display: flex;
        flex-direction: column;
        gap: 10px;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.4);
    }

    .card-user {
        opacity: 0.5;
        background: #333;
    }

    .btn-delete {
        background: #002baa;
        border: none;
        padding: 6px 10px;
        border-radius: 6px;
        cursor: pointer;
        color: white;
        font-size: 16px;
        margin-top: auto; /* Empurra o bot√£o para o fundo */
    }

    .btn-delete:hover {
        background: #0047cc;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        background: #222;
        color: white;
        border-radius: 10px;
        overflow: hidden;
    }

    table th, table td {
        padding: 15px;
        text-align: left;
    }

    table tr:nth-child(even) {
        background: #2b2b2b;
    }

    /* Estilos para pagina√ß√£o */
    .pagination {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
        align-items: center;
    }

    .pagination a {
        color: white;
        background: #444;
        padding: 8px 12px;
        text-decoration: none;
        border-radius: 5px;
        font-size: 16px;
    }

    .pagination a:hover {
        background: #666;
    }

    .pagination a.active {
        background: #002baa;
        color: white;
    }
</style>

<main>
    <div class="filtros-container">
        <div class="filtro-item">
            <form method="get" action="{{ url_for('lanche_insumos') }}">
                <input type="hidden" name="exibir_tabela" value="{{ exibir_tabela }}">
                <input type="hidden" name="form" value="exibir_tabela">
                <input type="hidden" name="page" value="1">
                <label for="exibir_tabela">Exibir tabela</label>
                <input type="checkbox" id="exibir_tabela" name="tabela" onchange="this.form.submit()" {% if exibir_tabela in ['True', True] %}checked{% endif %}>
            </form>
        </div>
    </div>

    {% if exibir_tabela in ['False', False] %}

        {% for i in lanche_insumos %}
        <div class="card">
            <h1>{{ i['insumo_nome'] }} - {{ i['lanche_nome'] }}</h1>
            <p>{{ i['qtd_insumo'] }}g</p>
            <form method="POST"
                action="{{ url_for('deletar_lanche_insumo', lanche_id=i['lanche_id'], insumo_id=i['insumo_id']) }}">
                <button type="submit" class="btn-delete">üóëÔ∏è</button>
            </form>
        </div>
        {% endfor %}

    {% else %}
    <table style="margin: 0 20px">
        <thead>
            <tr>
                <th>ID</th>
                <th>INSUMO</th>
                <th>LANCHE</th>
                <th>QTD</th>
                <th>A√á√ïES</th>
            </tr>
        </thead>
        <tbody>
            {% for i in lanche_insumos %}
            <tr>
                <td>{{ i['id_lanche_insumo'] }}</td>
                <td>{{ i['insumo_nome'] }}</td>
                <td>{{ i['lanche_nome'] }}</td>
                <td>{{ i['qtd_insumo'] }}</td>
                <td>
                    <form method="POST"
                        action="{{ url_for('deletar_lanche_insumo', lanche_id=i['lanche_id'], insumo_id=i['insumo_id']) }}">
                        <button type="submit" class="btn-delete">üóëÔ∏è</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}

    {% if total_pages > 1 %}
    <div class="pagination">
        {% if page > 1 %}
        <a href="{{ url_for('lanche_insumos', page=page-1, exibir_tabela=exibir_tabela) }}">Anterior</a>
        {% endif %}

        {% for p in range(1, total_pages+1) %}
        <a href="{{ url_for('lanche_insumos', page=p, exibir_tabela=exibir_tabela) }}" {% if p== page %}class="active" {% endif %}>{{ p }}</a>
        {% endfor %}

        {% if page < total_pages %}
        <a href="{{ url_for('lanche_insumos', page=page+1, exibir_tabela=exibir_tabela) }}">Pr√≥ximo</a>
        {% endif %}
    </div>
    {% endif %}
</main>

{% endblock %}